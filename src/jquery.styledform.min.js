/**
 * jQuery Styled Form plugin (minified)
 *
 * Inspired by styledinput.js by Ryan Fait (http://ryanfait.com)
 *
 * @author  James Halsall <james.t.halsall@googlemail.com>
 * @link    http://www.github.com/jaitsu87/jQuery-StyledForm
 * @license GPL (http://www.gnu.org/licenses/gpl-3.0.html)
 * @version 1.2.1
 */
(function(a){a.fn.styledForm=function(){var f,b=a.styledForm,c=b.config,d=a(this),e="";c.styledClass?(e="input."+c.styledClass+'[type="checkbox"], input.'+c.styledClass+'[type="radio"]',f="select."+c.styledClass):(e='input[type="checkbox"], input[type="radio"]',f="select");var g=d.find(e);a.each(g,function(d,e){var f=a("<span>").addClass(a(e).attr("type"));if(a(e).prop("checked")){var g;g="checkbox"==a(e).attr("type")?c.checkboxHeight:c.radioHeight,f.css("background-position","0 -"+2*g+"px").attr("data-checked",1)}"radio"==a(e).attr("type")&&f.attr("data-field-name",a(e).attr("name")),a(e).before(f),a(e).attr("disabled")&&f.addClass("disabled"),a(e).css("display","none"),b.addElement(f)});var h=d.find(f);a.each(h,function(d,e){var f=a(e).find("option:selected"),g=b._canonicalize(a(e).attr("name")),h=a("<span>",{"class":"select",id:"styled-select-"+g}),i=a(e).width()+c.selectArrowWidth;h.append(f.text()),h.css("width",i);var j=a("<span>",{"class":"select-arrow"});h.append(j),a(e).before(h),a(e).css("width",i);var k=a(e).parent();k.is("form")||k.css("width",i),a(e).attr("disabled")&&a(e).prev().addClass("disabled"),b.addElement(h)}),d.on("change",b.change),d.on("mousedown",b.beforeClick),d.on("mouseup",b.afterClick),c.pollFrequency!==!1&&setInterval(b.poll,c.pollFrequency)},a.styledForm={config:{checkboxHeight:22,radioHeight:22,selectArrowWidth:30,styledClass:"",pollFrequency:1e3},_elements:[],addElement:function(b){!b instanceof jQuery&&(b=a(b)),this._elements.push(b)},poll:function(){var b=a.styledForm;a.each(b._elements,function(c,d){var f,e=a(d);if(f=e.hasClass("select")?e.next("select"):e.next("input"),f.attr("disabled")&&!e.hasClass("disabled")?e.addClass("disabled"):!f.attr("disabled")&&e.hasClass("disabled")&&e.removeClass("disabled"),f.is('input[type="checkbox"]')||f.is('input[type="radio"]')){var g="checkbox"==f.attr("type")?b.config.checkboxHeight:b.config.radioHeight;f.prop("checked")&&!e.attr("data-checked")?e.css("background-position","0 -"+2*g+"px").attr("data-checked",1):!f.prop("checked")&&e.attr("data-checked")&&e.css("background-position","0 0").removeAttr("data-checked")}})},beforeClick:function(b){if(!b.which||3!=b.which){var c=a.styledForm.config,d=a(b.target),e=d.next();d.attr("for")&&(e=a("#"+d.attr("for")),d=e.prev("span"));var f=d.attr("class");if(!e.attr("disabled")&&a.styledForm._isStyledElement(e)&&-1!==a.inArray(f,["checkbox","radio"])){var g="0 -",h="checkbox"==f?c.checkboxHeight:c.radioHeight,i=h;d.prop("checked")&&(i=3*h),g+=i+"px",d.css("background-position",g)}}},afterClick:function(b){if(!b.which||3!=b.which){var c=a.styledForm.config,d=a(b.target),e=d.next("input");d.attr("for")&&(e=a("#"+d.attr("for")),d=e.prev("span"));var f=e.attr("type");if(!e.attr("disabled")&&a.styledForm._isStyledElement(e))if("radio"==f){var g=a(this).find('input[type="radio"][name="'+e.attr("name")+'"]');a.each(g,function(b,c){c!=e.get().nextSibling&&a(c).prev()&&(a(c).prev().css("background-position","0 0").removeAttr("data-checked",0),a(c).removeAttr("checked"))}),d.css("background-position","0 -"+2*c.radioHeight+"px"),d.attr("data-checked",1),e.prop("checked",!0)}else"checkbox"==f&&(e.prop("checked")?(d.css("background-position","0 0").removeAttr("data-checked"),e.removeAttr("checked")):(d.css("background-position","0 -"+2*c.checkboxHeight+"px").attr("data-checked",1),e.prop("checked",!0)))}},change:function(b){var c=a.styledForm.config,d=a(b.target),e=d.attr("type");if(a.styledForm._isStyledElement(d)){var f=a.styledForm._canonicalize(d.attr("name"));if("checkbox"==e){var g=d.parent().find(".checkbox");d.prop("checked")?(g.css("background-position","0 -"+2*c.checkboxHeight+"px").removeAttr("data-checked"),d.removeAttr("checked")):(g.css("background-position","0 0").attr("data-checked",1),d.prop("checked",!0))}else if("radio"!=e){var h=d.find("option:selected");a(this).find("#styled-select-"+f).html(h.text()+'<span class="select-arrow"></span>')}}},_isStyledElement:function(b){var c=a.styledForm.config.styledClass;return c?b.hasClass(c):!0},_canonicalize:function(b){return b?a.trim(b.replace(/\[/g,"").replace(/\]/g,"-").replace(/\$/g,"_")):""}}})(jQuery);